"""
This is a setup.py script originally generated by py2applet but
maintained manually

Usage:
    python setup.py py2app
"""

from setuptools import setup
from glob import glob
from anamorphy_files import version

NAME = "Anamorphy"
VERSION = version.getVersionFromScm()

APP = ['anamorphy_files/Anamorphy.py']
DATA_FILES = \
    glob('anamorphy_files/*.png') +\
    glob('anamorphy_files/*.ico') +\
    glob('anamorphy_files/*.html') +\
    glob('anamorphy_files/*.ini') +\
    glob('anamorphy_files/sample_pics') \
#    glob('anamorphy_files/sample_pics/*') \


EXT_PACKAGES = ['PIL', 'reportlab', 'simplejson', 'wx']

# A custom plist for letting it associate with all files.
PLIST = dict(
    CFBundleDocumentTypes=[
        dict(CFBundleTypeExtensions=["anamorphy"],
             CFBundleTypeName="Anamorphy Document",
             CFBundleTypeRole="Editor"),
        ],
#    CFBundleGetInfoString="The text shown by Finder's Get Info panel."
#    CFBundleIconFile=NAME,
    CFBundleName=NAME,
    CFBundleShortVersionString=VERSION,
    CFBundleGetInfoString=' '.join([NAME, VERSION]),
    CFBundleExecutable=NAME,
    CFBundleIdentifier='net.homelinux.ten.anamorphy',
    )

PY2APP_OPTIONS = {
    'argv_emulation': True,
    'iconfile': 'anamorphy.icns',
    'plist': PLIST,
    'includes': EXT_PACKAGES,
    'optimize': 0, # >0 will crash the app :-(
    }

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': PY2APP_OPTIONS},
    setup_requires=['py2app'],
)
